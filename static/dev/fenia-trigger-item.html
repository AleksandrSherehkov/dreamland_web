<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<title></title>
</head>
<h1>Триггеры предметов </h1>
<p />
<h3><a name="Общие для всех видов предметов"></a> Общие для всех видов предметов </h3>
<p />
<font color="#008000">onWear</font><font color="#808000">(ch)       </font>- ch одел предмет на тело
<p />
<font color="#008000">onRemove</font><font color="#808000">(ch)     </font>- ch снял предмет с тела
<p />
<font color="#008000">onGet</font><font color="#808000">(ch)        </font>- предмет попал в инвентарь к ch
<p />
<font color="#008000">onDrop</font><font color="#808000">(ch)       </font>- ch уронил предмет. Надо вернуть true, если в триггере
                   предмет разрушен, или если хотим чтобы он не утонул в
		   воде и не рассыпался (при extra_flag melt_drop).
<p />
<font color="#008000">onSac</font><font color="#808000">(ch)        </font>- ch принес в жертву предмет. Вызывается сразу после 
                   сообщения "Такой-то приносит в жертву богам что-то.".
		   Если уничтожаем предмет, надо вернуть true.
<p />
<font color="#008000">onEntry</font><font color="#808000">()        </font>- тот, кто нес предмет, вошел в какую-то комнату. 
<p />
<font color="#008000">onGive</font><font color="#808000">(ch, vict) </font>- ch дал предмет чару vict. Если вернем true, не будет
                   вызван триггер onGive у vict, и onGet(vict) у этого
		   предмета. True нужно возвращать, если предмет уничтожен
		   или не задержался в руках у vict.
<p />
<font color="#008000">onGreet</font><font color="#808000">(ch)     </font>-  ch вошел в комнату, а предмет - в руках у стоящего в комнате
                   или лежит на полу.
<p />
<font color="#008000">onFight</font><font color="#808000">(ch)      </font>- ch, несущий предмет, сражается. 
                   Вызывается каждый баттл-раунд (раз в 4 секунды).
<p />
<font color="#008000">onDeath</font><font color="#808000">(ch)      </font>- ch, на которого одет предмет, пытается умереть. 
                   Если возращаем true, он воскресает и остается стоять.
<p />
<font color="#008000">onSpeech</font><font color="#808000">(ch, str)</font>- ch произнес фразу 'str' стоя рядом с предметом
<p />
<font color="#008000">onArea</font><font color="#808000">()         </font>- вызывается каждую минуту. Если разрушаем предмет, или не 
                   хотим, чтобы для него тикал timer, надо вернуть true.
<p />
<font color="#008000">onExtract</font><font color="#808000">(count) </font>- предмет разрушается. count == false означает, что разрушение
                   не уменьшит счетчика предметов с этим внумом. Пример -
		   выход чара из мира. 
		   На момент вызова триггера предмет уже удален из всех списков.
<p />
<font color="#008000">onQuit</font><font color="#808000">(ch,count) </font>- ch покидает мир. Если разрушаем предмет, надо вернуть true.
                   count == false при обычном quit, и true при делите.
<p />
<font color="#008000">onExamine</font><font color="#808000">(ch)    </font>- ch пялится на предмет (команда examine). Если вернем true, 
                   стандартные сообщения от examine не появятся.
<p />
<font color="#008000">onInvisible</font><font color="#808000">(ch)  </font>- Если вернем true, предмет будет всегда невидим для ch.
                   Если false - будут вызваны стандартные проверки 
		   видимости-невидимости.
<p />
<font color="#008000">onPut</font><font color="#808000">(ch,obj,cont)</font>- ch кладет obj в контейнер cont. Триггер вызывается для
                    всех троих.
<p />
<font color="#008000">onUse</font><font color="#808000">(ch,str)    </font>- ch применил на предмет команду 'use' с аргументами str.
                   Если вернуть false, ch будет 'вертеть в руках, не зная
		   что с ним делать'.
<p />
<font color="#008000">onExtraDescr</font><font color="#808000">(ch,str) </font>- возвращает строку, которую надо показать чару ch,
                       при взгляде на экстра-дескр str. Если вернуть пустую
		       строку, продолжится поиск другого экстра-деска, иначе
		       -- покажет то что мы вернули, и оборвет поиск.
<p />
<font color="#008000">onLook</font><font color="#808000">(ch, str) </font>- на предмете был экстра-дескр с ключевым словом str, и ch
                  только что увидел его (например, предмет - это книга,
		  и ch выполнил "look page1", тогда в onLook передастся ch
		  и "page1").
<p />
<font color="#008000">onCommand</font><font color="#808000">(ch, cmdName, cmdArgs) </font>
             - ch, держащий этот предмет в руках, пытается выполнить команду
	       с именем cmdName и аргументами cmdArgs. если триггер возвращает
	       true, команду выполнить не получится. осторожно, с помощью
	       этого триггера можно полностью обездвижить персонажа, если 
	       всегда возвращать true!
<p />
<p />
<p />
<h3><a name="Триггеры для контейнеров (contai"></a> Триггеры для контейнеров (container) </h3>
<font color="#008000">onFetch</font><font color="#808000">(ch,obj) </font>- ch вынул obj из этого предмета-контейнера
<p />
<font color="#008000">onClose</font><font color="#808000">(ch)     </font>- ch закрыл этот предмет-контейнер. Вызывается сразу после
                   фразы "Ты закрываешь &lt;что-то&gt;".
<p />
<font color="#008000">onOpen</font><font color="#808000">(ch)      </font>- ch открыл этот предмет-контейнер. Вызывается сразу после
                   фразы "Ты открываешь &lt;что-то&gt;".
<p />
<font color="#008000">onCantFetch</font><font color="#808000">(ch) </font>- чар ch пытается что-то вытащить из этого контейнера. 
	          если вернуть true - вытащить не получится.
<p />
<font color="#008000">onCantPut</font><font color="#808000">(ch, obj, pocket, verbose)</font>
              - чар ch пытается положить предмет obj в этот контейнер
	        (возможно в карман с именем pocket). если вернуть true - положить не получится. 
		параметр verbose задает, надо ли выводить чару сообщения о
		неудаче. например, при "put all.something container" - 
		спамить при попытке класть каждый предмет не нужно, и 
		verbose будет равно false.
<p />
<p />
<h3><a name="Триггеры для мебели (furniture)"></a> Триггеры для мебели (furniture) </h3>
<font color="#008000">onShowWhere</font><font color="#808000">(ch, looker) </font>
                - пусть ch сидит на предмете, а другой чар (looker) выполняет look.
		  если onShowWhere вернет строку, то looker увидит ее вместо 
		  стандартного "на стуле", "в кровати" и тп.
<p />
<font color="#008000">onShowEnd</font><font color="#808000">(ch, looker)</font>
               - пусть ch сидит на предмете, а другой чар looker выполняет look.
	         строку, возвращаемую onShowEnd, looker увидит в конце стандартных
		 сообщений (например "такой-то сидит на стуле ... закинув ногу на ногу").
<p />
<p />
<h3><a name="Триггеры для порталов (portal)"></a> Триггеры для порталов (portal) </h3>
<font color="#008000">onPortalLocation</font><font color="#808000">(ch)</font>
              - пусть ch пытается войти в портал. если триггер вернет 0, чар
	        попадает в комнату предусмотренную этим	порталом, если вернуть
		число - чар попадет в комнату с указанным внумом.
<p />
<h3><a name="Триггеры для пищи (food, drink)"></a> Триггеры для пищи (food, drink) </h3>
<font color="#008000">onEat</font><font color="#808000">(ch)</font>
              - принимает в параметры чара-едока, если ты изнутри уничтожаешь объект или 
                    же наоборот - не хочешь, чтобы он исчез как обычно бывает 
                         после 'eat', возвращай true.
<p />
<p />
<font color="#008000">onDrink</font><font color="#808000">(ch, liqName, amount)</font> - чар ch пьет жидкость liqName в размере глотка amount. При питье из бочонков он равен полю sip_size у жидкости, а из фонтанов - в три раза больше. 
