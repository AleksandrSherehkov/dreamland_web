<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<title></title>
</head>
<h1>Триггеры персонажей </h1>
Для простоты тригера описываются 'от первого лица', т.е. 'мы' - это 
тот персонаж, от которого вызывается данный триггер.
<p />
<h3><a name="Периодические действия"></a> Периодические действия </h3>
<font color="#008000">onSpec</font><font color="#808000">()</font> - вызывается каждые четыре секунды. если вернуть true, другие автоматические действия для мобов выполняться не будут.
<p />
<font color="#008000">onArea</font><font color="#808000">()</font> - вызывается каждую минуту.
<p />
<h3><a name="Разное"></a> Разное </h3>
<font color="#008000">onBribe</font><font color="#808000">(ch, amount)</font> - ch дал нам amount серебра
<p />
<font color="#008000">onGive</font><font color="#808000">(ch, obj)</font> - ch дал нам предмет obj
<p />
<font color="#008000">onWake</font><font color="#808000">(ch)</font> - ch разбудил нас
<p />
<font color="#008000">onPut</font><font color="#808000">(ch, obj, container)</font> - мы положили предмет obj в контейнер container.  этот триггер вызывается для всех троих: для кладущего, для предмета и для контейнера. при вызове для кладущего ch будет, соответственно, равно нам. при уничтожении container-а вернуть true.
<p />
<font color="#008000">onCommand</font><font color="#808000">(ch, cmdName, cmdArgs)</font> - ch пытается выполнить рядом с нами команду cmdName с аргументами cmdArgs. если вернуть true, выполнить команду не удастся.
<p />
<font color="#008000">onSkill</font><font color="#808000">(ch, skillName, success, victim)</font> - вызывается для комнаты. ch - кто применяет умение, skillName - название скила, success -  успешно применилось или нет, victim - цель скила либо null
<p />
<font color="#008000">onStopfol</font><font color="#808000">(master)</font> - мы прекратили следовать за master
<p />
<font color="#008000">onExtract</font><font color="#808000">(count)</font> - нас уничтожают, если count==false - это выход чара из мира, иначе - полное уничтожение. на момент уничтожения мы уже удалены из всех списков.              
<p />
<font color="#008000">onAct</font><font color="#808000">(msg)</font> - нам пришла строка msg. этот триггер ловит 'сырой' вывод чару, самого низкого уровня. используйте его, только если ждете строку неизвестного происхождения. в большинстве случаев должно хватать onEmote, onSpeech, onSocial.
<p />
<font color="#008000">onStealFail</font><font color="#808000">(thief)</font>  - вызывается при неудачной попытке обокрасть. если вернуть true, моб не будет орать 'убери руки' и атаковать вора.
<p />
<font color="#008000">onStealItem</font><font color="#808000">(thief, obj)</font> - попытка украсть у моба obj увенчалась успехом
<p />
<font color="#008000">onStealMoney</font><font color="#808000">(thief, gold, silver)</font> - у моба успешно украли деньги в размере gold золотых и silver серебряных монет.
<p />
<h3><a name="Эмоции, общение"></a> Эмоции, общение </h3>
<font color="#008000">onSpeech</font><font color="#808000">(ch, msg)</font> - ch произнес рядом с нами реплику msg
<p />
<font color="#008000">onTell</font><font color="#808000">(ch, msg)</font> - ch сказал нам реплику msg
<p />
<font color="#008000">onEmote</font><font color="#808000">(ch, msg)</font> - ch выразил рядом с нами эмоцию msg
<p />
<font color="#008000">onSocial</font><font color="#808000">(ch, victim, social)</font> - ch применил социал social, возможно на жертву victim.
<p />
<font color="#008000">onSmell</font><font color="#808000">(ch, arg)</font> - ch обнюхивает нас, arg - дополнительный аргумент для smell
<p />
<h3><a name="Перемещения по комнатам"></a> Перемещения по комнатам </h3>
<font color="#008000">onEntry</font><font color="#808000">()</font> - мы вошли в какую-то комнату
<p />
<font color="#008000">onGreet</font><font color="#808000">(ch)</font> - ch вошел в нашу комнату
<p />
<font color="#008000">onCantLeave</font><font color="#808000">(ch)</font> - разрешено ли ch покидать нашу комнату. если не разрешено - надо вернуть true
<p />
<font color="#008000">onLeave</font><font color="#808000">(ch, from_room, movetype)</font> - ch только что вышел из нашей комнаты, направляясь в комнату from_room. movetype может быть равен running, normal, slink, crowl (см. help movetype)
<p />
<font color="#008000">onCantMove</font><font color="#808000">(to_room, movetype)</font> - можем ли мы переместиться в комнату to_room. если не можем - надо вернуть true. 
<p />
<h3><a name="Сражения, касты, смерть"></a> Сражения, касты, смерть </h3>
<font color="#008000">onAttack</font><font color="#808000">(ch, victim)</font> - вызывается в комнате при нападении ch на victim (для рэндж-атаки в каждой комнате)
<p />
<font color="#008000">onFight</font><font color="#808000">(ch)</font> - вызывается каждый баттл-тик (3 секунды) при сражении с ch
<p />
<font color="#008000">onDeath</font><font color="#808000">(ch)</font> - ch убил нас. если вернуть true, мы не умрем и останемся стоять
<p />
<font color="#008000">onKill</font><font color="#808000">(ch)</font> - мы убили ch
<p />
<font color="#008000">onSafe</font><font color="#808000">(ch, victim)</font> - защищают ли боги victim от атак ch. этот тригер вызывается для обоих сторон, поэтому, когда выясняется защищают ли ОТ наших атак, мы равны ch. когда выясняется, защищают ли НАС от чьих-то атак, мы равны victim
<p />
<font color="#008000">onHit</font><font color="#808000">(ch, dam, damType, wield)</font> - ch нанес нам повреждения размером dam, типом дамаги damType и оружием wield (wield==null при сражении голыми руками).
<p />
<font color="#008000">onCheckAssist</font><font color="#808000">(fch, victim)</font> - рядом с нами чар fch сражается с victim, если вернуть true, мы вступим в битву на стороне fch. вызывается только для мобов.
<p />
<font color="#008000">onSpell</font><font color="#808000">(ch, spell, before)</font> - ch скастовал на нас заклинание spell. вызывается дважды, причем before будет равно true перед кастом, и false - после каста.
<p />
<font color="#008000">onCast</font><font color="#808000">(arg, spell, before)</font> - мы кастуем заклинание spell со строковым аргументом arg
<p />
<font color="#008000">onCast</font><font color="#808000">(obj, spell, before)</font> - мы кастуем заклинание spell на предмет obj
<p />
<font color="#008000">onCast</font><font color="#808000">(ch, spell, before)</font> - мы кастуем заклинание spell на жертву ch
<p />
<font color="#008000">onCast</font><font color="#808000">(room, spell, before)</font> - мы кастуем заклинание spell на комнату room
<p />
<h3><a name="Триггера для спецмобов"></a> Триггера для спецмобов </h3>
<font color="#008000">onSell</font><font color="#808000">(ch, obj, cost, number)</font> - мы продали чару ch предмет obj, по цене cost и в количестве number штук. вызывается только для мобов-продавцов
<p />
<font color="#008000">onCantTrain</font><font color="#808000">(ch)</font> - можем ли мы тренировать ch. вызывается только для мобов-тренеров
<p />
<h3><a name="Системные, не использовать"></a> Системные, не использовать </h3>
<font color="#008000">onConnect</font>
<p />
<font color="#008000">onInput</font> 
